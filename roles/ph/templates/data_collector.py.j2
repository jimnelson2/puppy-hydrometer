import datetime
import os.path
from HX711 import *

hx = SimpleHX711({{gpio_pin_data}}, {{gpio_pin_clock}}, {{hx711_reference_unit}}, {{hx711_zero_value}})
hx.setUnit(Mass.Unit.G)
hx.zero()

if not os.path.exists("{{data_file}}"):
  with open("{{data_file}}", "w") as myfile:
    myfile.write("time,weight\n")

while True:
  wt = round(float(hx.weight(10)),2)
  with open("{{data_file}}", "a") as myfile:
    myfile.write(datetime.datetime.now().isoformat() + "," + str(wt) + "\n")
